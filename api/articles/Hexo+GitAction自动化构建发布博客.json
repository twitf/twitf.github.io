{"title":"Hexo+GitAction自动化构建发布博客","uid":"cc3588dbfcf9f0fd324fe5fb6a21d796","slug":"Hexo+GitAction自动化构建发布博客","date":"2022-04-18T09:30:34.000Z","updated":"2022-10-11T02:53:13.803Z","comments":true,"path":"api/articles/Hexo+GitAction自动化构建发布博客.json","keywords":null,"cover":null,"content":"<h1 id=\"新建一个私有仓库\"><a href=\"#新建一个私有仓库\" class=\"headerlink\" title=\"新建一个私有仓库\"></a>新建一个私有仓库</h1><h1 id=\"绑定私有秘钥\"><a href=\"#绑定私有秘钥\" class=\"headerlink\" title=\"绑定私有秘钥\"></a>绑定私有秘钥</h1><h1 id=\"添加自动化构建脚本\"><a href=\"#添加自动化构建脚本\" class=\"headerlink\" title=\"添加自动化构建脚本\"></a>添加自动化构建脚本</h1><div class=\"language-yml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">yml</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #545454; font-style: italic\"># workflow name</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">Hexo Blog CI</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\"># master branch on push, auto run</span></span>\n<span class=\"line\"><span style=\"color: #FF9CAC\">on</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">push</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F07178\">branches</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">master</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F07178\">jobs</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">build</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F07178\">runs-on</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">ubuntu-latest</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F07178\">steps</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">      </span><span style=\"color: #545454; font-style: italic\"># check it to your workflow can access it</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">      </span><span style=\"color: #545454; font-style: italic\"># from: https://github.com/actions/checkout</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">Checkout Repository master branch</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #F07178\">uses</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">actions/checkout@master</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">      </span><span style=\"color: #545454; font-style: italic\"># from: https://github.com/actions/setup-node</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">Setup Node.js 12.x</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #F07178\">uses</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">actions/setup-node@master</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #F07178\">with</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">          </span><span style=\"color: #F07178\">node-version</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">12.x</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">Setup Hexo Dependencies</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #F07178\">run</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF; font-style: italic\">|</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          npm install hexo-cli -g</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          npm install</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">Setup Deploy Private Key</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #F07178\">env</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">          </span><span style=\"color: #F07178\">HEXO_DEPLOY_PRIVATE_KEY</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">$&#123;&#123; secrets.HEXO_DEPLOY_KEY &#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #F07178\">run</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF; font-style: italic\">|</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          mkdir -p ~/.ssh/</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          echo &quot;$HEXO_DEPLOY_PRIVATE_KEY&quot; &gt; ~/.ssh/id_rsa </span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          chmod 600 ~/.ssh/id_rsa</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">Setup Git Infomation</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #F07178\">run</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF; font-style: italic\">|</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          git config --global user.name &#39;twitf&#39; </span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          git config --global user.email &#39;qiangzaiying@outlook.com&#39;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F07178\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">Deploy Hexo</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #F07178\">run</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF; font-style: italic\">|</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          hexo clean</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          hexo generate </span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">          hexo deploy</span></span></code></pre></div>","text":"新建一个私有仓库绑定私有秘钥添加自动化构建脚本yml# workflow name name: Hexo Blog CI # master branch on ...","permalink":"/post/Hexo+GitAction自动化构建发布博客","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"Hexo","slug":"Hexo","count":1,"path":"api/categories/Hexo.json"}],"tags":[{"name":"Hexo","slug":"Hexo","count":1,"path":"api/tags/Hexo.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93\"><span class=\"toc-text\">新建一个私有仓库</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%BB%91%E5%AE%9A%E7%A7%81%E6%9C%89%E7%A7%98%E9%92%A5\"><span class=\"toc-text\">绑定私有秘钥</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA%E8%84%9A%E6%9C%AC\"><span class=\"toc-text\">添加自动化构建脚本</span></a></li></ol>","author":{"name":"Twitf","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"<p>To Win In The Future.</p> <p>赢<b>在</b>未来。</p>","socials":{"github":"https://github.com/twitf","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"类似MySQL中Order By Field 的php实现","uid":"1c3ac0c64b03a7ba2e9a5790eba12228","slug":"类似Mysql中Order By Field 的php实现","date":"2022-04-22T07:06:34.000Z","updated":"2023-09-12T05:50:09.117Z","comments":true,"path":"api/articles/类似Mysql中Order By Field 的php实现.json","keywords":null,"cover":null,"text":" 提示 我们知道在MySQL可以通过...order by field()函数自定义排序，格式：field(字段名,str1,str2,str3,str4)，按...","permalink":"/post/类似Mysql中Order By Field 的php实现","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"PHP","slug":"PHP","count":6,"path":"api/categories/PHP.json"}],"tags":[{"name":"PHP","slug":"PHP","count":5,"path":"api/tags/PHP.json"},{"name":"Array Sort","slug":"Array-Sort","count":1,"path":"api/tags/Array-Sort.json"}],"author":{"name":"Twitf","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"<p>To Win In The Future.</p> <p>赢<b>在</b>未来。</p>","socials":{"github":"https://github.com/twitf","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Docker 常用镜像部署","uid":"75dacad14e098df2be0901cfbf963953","slug":"Docker 常用镜像部署","date":"2022-04-15T03:50:34.000Z","updated":"2023-01-31T06:48:29.638Z","comments":true,"path":"api/articles/Docker 常用镜像部署.json","keywords":null,"cover":null,"text":"docker rabbitmqbashdocker run --privileged --restart=always -it -d --hostname=ra...","permalink":"/post/Docker 常用镜像部署","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"Docker","slug":"Docker","count":2,"path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":2,"path":"api/tags/Docker.json"},{"name":"DockerImages","slug":"DockerImages","count":1,"path":"api/tags/DockerImages.json"}],"author":{"name":"Twitf","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"<p>To Win In The Future.</p> <p>赢<b>在</b>未来。</p>","socials":{"github":"https://github.com/twitf","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}