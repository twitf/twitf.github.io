{"title":"类似MySQL中Order By Field 的php实现","uid":"1c3ac0c64b03a7ba2e9a5790eba12228","slug":"类似Mysql中Order By Field 的php实现","date":"2022-04-22T07:06:34.000Z","updated":"2023-09-12T05:50:09.117Z","comments":true,"path":"api/articles/类似Mysql中Order By Field 的php实现.json","keywords":null,"cover":null,"content":"<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">提示</p>\n<p>我们知道在MySQL可以通过<code>...order by field()</code>函数自定义排序，格式：<code>field(字段名,str1,str2,str3,str4)</code>，按照str1、str2、str3、str4顺序返回。那么在php如何实现</p>\n</div>\n<h3 id=\"实现：\"><a href=\"#实现：\" class=\"headerlink\" title=\"实现：\"></a>实现：</h3><div class=\"language-php\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">php</span><pre class=\"shiki One Dark Pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C678DD\">function</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">orderByField</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">$data</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">$field</span><span style=\"color: #ABB2BF\">, </span><span style=\"color: #E06C75\">$sort</span><span style=\"color: #ABB2BF\">)  </span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&#123;  </span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #E06C75\">$keys</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">array_reduce</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">$data</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">function</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">$result</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #E06C75\">$v</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #C678DD\">use</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">$field</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #E06C75\">$sort</span><span style=\"color: #ABB2BF\">)</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #ABB2BF\">&#123;</span><span style=\"color: #61AFEF\">  </span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">        </span><span style=\"color: #E06C75\">$result</span><span style=\"color: #ABB2BF\">[]</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #56B6C2\">array_search</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">$v</span><span style=\"color: #ABB2BF\">[</span><span style=\"color: #E06C75\">$field</span><span style=\"color: #ABB2BF\">],</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #E06C75\">$sort</span><span style=\"color: #ABB2BF\">);</span><span style=\"color: #61AFEF\">  </span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">        </span><span style=\"color: #C678DD\">return</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #E06C75\">$result</span><span style=\"color: #ABB2BF\">;</span><span style=\"color: #61AFEF\">  </span></span>\n<span class=\"line\"><span style=\"color: #61AFEF\">    </span><span style=\"color: #ABB2BF\">&#125;);    </span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #56B6C2\">array_multisort</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">$keys</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #E06C75\">$data</span><span style=\"color: #ABB2BF\">);  </span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    </span><span style=\"color: #C678DD\">return</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #E06C75\">$data</span><span style=\"color: #ABB2BF\">;  </span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">&#125;</span></span></code></pre></div><h3 id=\"例子：\"><a href=\"#例子：\" class=\"headerlink\" title=\"例子：\"></a>例子：</h3><div class=\"language-php\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">php</span><pre class=\"shiki One Dark Pro\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #E06C75\">$data</span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\">[</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #98C379\">&#39;name&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #98C379\">&#39;a&#39;</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #98C379\">&#39;age&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #D19A66\">10</span><span style=\"color: #ABB2BF\">],</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #98C379\">&#39;name&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #98C379\">&#39;b&#39;</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #98C379\">&#39;age&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #D19A66\">20</span><span style=\"color: #ABB2BF\">],</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #98C379\">&#39;name&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #98C379\">&#39;c&#39;</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #98C379\">&#39;age&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #D19A66\">30</span><span style=\"color: #ABB2BF\">],</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #98C379\">&#39;name&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #98C379\">&#39;d&#39;</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #98C379\">&#39;age&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #D19A66\">40</span><span style=\"color: #ABB2BF\">],</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #98C379\">&#39;name&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #98C379\">&#39;e&#39;</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #98C379\">&#39;age&#39;</span><span style=\"color: #ABB2BF\">=&gt;</span><span style=\"color: #D19A66\">50</span><span style=\"color: #ABB2BF\">]</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">];</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">$sort</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> [</span><span style=\"color: #D19A66\">10</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #D19A66\">30</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #D19A66\">20</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #D19A66\">50</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #D19A66\">40</span><span style=\"color: #ABB2BF\">];</span></span>\n<span class=\"line\"><span style=\"color: #E06C75\">$data</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #56B6C2\">=</span><span style=\"color: #ABB2BF\"> </span><span style=\"color: #61AFEF\">orderByField</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">$data</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #98C379\">&#39;age&#39;</span><span style=\"color: #ABB2BF\">,</span><span style=\"color: #61AFEF\"> </span><span style=\"color: #E06C75\">$sort</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color: #56B6C2\">print_r</span><span style=\"color: #ABB2BF\">(</span><span style=\"color: #E06C75\">$data</span><span style=\"color: #ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #7F848E; font-style: italic\">//这样就得到我们需要的数据</span></span>\n<span class=\"line\"><span style=\"color: #E5C07B\">Array</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #D19A66\">0</span><span style=\"color: #ABB2BF\">] =&gt; </span><span style=\"color: #E5C07B\">Array</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        (</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [name] =&gt; a</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [age] =&gt; </span><span style=\"color: #D19A66\">10</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        )</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #D19A66\">1</span><span style=\"color: #ABB2BF\">] =&gt; </span><span style=\"color: #E5C07B\">Array</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        (</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [name] =&gt; c</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [age] =&gt; </span><span style=\"color: #D19A66\">30</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        )</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #D19A66\">2</span><span style=\"color: #ABB2BF\">] =&gt; </span><span style=\"color: #E5C07B\">Array</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        (</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [name] =&gt; b</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [age] =&gt; </span><span style=\"color: #D19A66\">20</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        )</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #D19A66\">3</span><span style=\"color: #ABB2BF\">] =&gt; </span><span style=\"color: #E5C07B\">Array</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        (</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [name] =&gt; e</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [age] =&gt; </span><span style=\"color: #D19A66\">50</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        )</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">    [</span><span style=\"color: #D19A66\">4</span><span style=\"color: #ABB2BF\">] =&gt; </span><span style=\"color: #E5C07B\">Array</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        (</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [name] =&gt; d</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">            [age] =&gt; </span><span style=\"color: #D19A66\">40</span></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">        )</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #ABB2BF\">)</span></span></code></pre></div>","text":" 提示 我们知道在MySQL可以通过...order by field()函数自定义排序，格式：field(字段名,str1,str2,str3,str4)，按...","permalink":"/post/类似Mysql中Order By Field 的php实现","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"PHP","slug":"PHP","count":6,"path":"api/categories/PHP.json"}],"tags":[{"name":"PHP","slug":"PHP","count":5,"path":"api/tags/PHP.json"},{"name":"Array Sort","slug":"Array-Sort","count":1,"path":"api/tags/Array-Sort.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E7%8E%B0%EF%BC%9A\"><span class=\"toc-text\">实现：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BE%8B%E5%AD%90%EF%BC%9A\"><span class=\"toc-text\">例子：</span></a></li></ol>","author":{"name":"Twitf","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"<p>To Win In The Future.</p> <p>赢<b>在</b>未来。</p>","socials":{"github":"https://github.com/twitf","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"MySQL递归查询","uid":"722b211213a6af1ef0df8ab625f12f39","slug":"MySql递归查询","date":"2022-06-29T06:19:34.000Z","updated":"2022-11-16T05:46:38.494Z","comments":true,"path":"api/articles/MySql递归查询.json","keywords":null,"cover":null,"text":"MySQL递归查询MySQL单个父节点查询所有子节点sqlSELECT p.id FROM (SELECT * FROM sfc_kpi_permission ...","permalink":"/post/MySql递归查询","photos":[],"count_time":{"symbolsCount":643,"symbolsTime":"1 mins."},"categories":[{"name":"MySQL","slug":"MySQL","count":3,"path":"api/categories/MySQL.json"}],"tags":[{"name":"递归","slug":"递归","count":1,"path":"api/tags/递归.json"}],"author":{"name":"Twitf","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"<p>To Win In The Future.</p> <p>赢<b>在</b>未来。</p>","socials":{"github":"https://github.com/twitf","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Hexo+GitAction自动化构建发布博客","uid":"cc3588dbfcf9f0fd324fe5fb6a21d796","slug":"Hexo+GitAction自动化构建发布博客","date":"2022-04-18T09:30:34.000Z","updated":"2022-10-11T02:53:13.803Z","comments":true,"path":"api/articles/Hexo+GitAction自动化构建发布博客.json","keywords":null,"cover":null,"text":"新建一个私有仓库绑定私有秘钥添加自动化构建脚本yml# workflow name name: Hexo Blog CI # master branch on ...","permalink":"/post/Hexo+GitAction自动化构建发布博客","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"Hexo","slug":"Hexo","count":1,"path":"api/categories/Hexo.json"}],"tags":[{"name":"Hexo","slug":"Hexo","count":1,"path":"api/tags/Hexo.json"}],"author":{"name":"Twitf","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"<p>To Win In The Future.</p> <p>赢<b>在</b>未来。</p>","socials":{"github":"https://github.com/twitf","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}