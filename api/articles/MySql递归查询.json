{"title":"MySQL递归查询","uid":"722b211213a6af1ef0df8ab625f12f39","slug":"MySql递归查询","date":"2022-06-29T06:19:34.000Z","updated":"2022-11-16T05:46:38.494Z","comments":true,"path":"api/articles/MySql递归查询.json","keywords":null,"cover":null,"content":"<h1 id=\"MySQL递归查询\"><a href=\"#MySQL递归查询\" class=\"headerlink\" title=\"MySQL递归查询\"></a>MySQL递归查询</h1><h2 id=\"MySQL单个父节点查询所有子节点\"><a href=\"#MySQL单个父节点查询所有子节点\" class=\"headerlink\" title=\"MySQL单个父节点查询所有子节点\"></a>MySQL单个父节点查询所有子节点</h2><div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F78C6C\">SELECT</span><span style=\"color: #EEFFFF\"> p.id </span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">FROM</span><span style=\"color: #EEFFFF\"> (</span><span style=\"color: #F78C6C\">SELECT</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">FROM</span><span style=\"color: #EEFFFF\"> sfc_kpi_permission </span><span style=\"color: #F78C6C\">WHERE</span><span style=\"color: #EEFFFF\"> parent_id </span><span style=\"color: #F78C6C\">IS NOT NULL</span><span style=\"color: #EEFFFF\">) p,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">     (</span><span style=\"color: #F78C6C\">SELECT</span><span style=\"color: #EEFFFF\"> @pid :</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">6</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">) parentId </span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">WHERE</span><span style=\"color: #EEFFFF\"> FIND_IN_SET(parent_id, @pid) </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #EEFFFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F78C6C\">AND</span><span style=\"color: #EEFFFF\"> @pid :</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">concat</span><span style=\"color: #EEFFFF\">(@pid, </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">,</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">, id)</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">union</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #EEFFFF\"> id </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #EEFFFF\"> sfc_kpi_permission </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #EEFFFF\"> id </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">6</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">;</span></span></code></pre></div><h2 id=\"MySQL多个父节点查询所有子节点\"><a href=\"#MySQL多个父节点查询所有子节点\" class=\"headerlink\" title=\"MySQL多个父节点查询所有子节点\"></a>MySQL多个父节点查询所有子节点</h2><div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F78C6C\">SELECT</span><span style=\"color: #EEFFFF\"> p.id </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F78C6C\">FROM</span><span style=\"color: #EEFFFF\"> (</span><span style=\"color: #F78C6C\">SELECT</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">FROM</span><span style=\"color: #EEFFFF\"> sfc_kpi_permission </span><span style=\"color: #F78C6C\">WHERE</span><span style=\"color: #EEFFFF\"> parent_id </span><span style=\"color: #F78C6C\">IS NOT NULL</span><span style=\"color: #EEFFFF\">) p,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">         (</span><span style=\"color: #F78C6C\">SELECT</span><span style=\"color: #EEFFFF\"> @pid :</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">6,8</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">) parentId </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F78C6C\">WHERE</span><span style=\"color: #EEFFFF\"> FIND_IN_SET(parent_id, @pid) </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #EEFFFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F78C6C\">AND</span><span style=\"color: #EEFFFF\"> @pid :</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">concat</span><span style=\"color: #EEFFFF\">(@pid, </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">,</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">, id) </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F78C6C\">union</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">select</span><span style=\"color: #EEFFFF\"> id </span><span style=\"color: #F78C6C\">from</span><span style=\"color: #EEFFFF\"> sfc_kpi_permission </span><span style=\"color: #F78C6C\">where</span><span style=\"color: #EEFFFF\"> FIND_IN_SET(id,@pid) </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #EEFFFF\">;</span></span></code></pre></div>","text":"MySQL递归查询MySQL单个父节点查询所有子节点sqlSELECT p.id FROM (SELECT * FROM sfc_kpi_permission ...","permalink":"/post/MySql递归查询","photos":[],"count_time":{"symbolsCount":643,"symbolsTime":"1 mins."},"categories":[{"name":"MySQL","slug":"MySQL","count":3,"path":"api/categories/MySQL.json"}],"tags":[{"name":"递归","slug":"递归","count":1,"path":"api/tags/递归.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#MySQL%E9%80%92%E5%BD%92%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">MySQL递归查询</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#MySQL%E5%8D%95%E4%B8%AA%E7%88%B6%E8%8A%82%E7%82%B9%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AD%90%E8%8A%82%E7%82%B9\"><span class=\"toc-text\">MySQL单个父节点查询所有子节点</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#MySQL%E5%A4%9A%E4%B8%AA%E7%88%B6%E8%8A%82%E7%82%B9%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AD%90%E8%8A%82%E7%82%B9\"><span class=\"toc-text\">MySQL多个父节点查询所有子节点</span></a></li></ol></li></ol>","author":{"name":"Twitf","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"<p>To Win In The Future.</p> <p>赢<b>在</b>未来。</p>","socials":{"github":"https://github.com/twitf","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Go语言格式化输出","uid":"b398498d65c27585ce393b4f621ee174","slug":"Go语言格式化输出","date":"2022-09-20T01:24:34.000Z","updated":"2023-09-12T05:56:29.176Z","comments":true,"path":"api/articles/Go语言格式化输出.json","keywords":null,"cover":null,"text":"gopackage main import &quot;fmt&quot; import &quot;os&quot; type point struct &#...","permalink":"/post/Go语言格式化输出","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"GO","slug":"GO","count":1,"path":"api/categories/GO.json"}],"tags":[{"name":"GO","slug":"GO","count":1,"path":"api/tags/GO.json"}],"author":{"name":"Twitf","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"<p>To Win In The Future.</p> <p>赢<b>在</b>未来。</p>","socials":{"github":"https://github.com/twitf","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"类似MySQL中Order By Field 的php实现","uid":"1c3ac0c64b03a7ba2e9a5790eba12228","slug":"类似Mysql中Order By Field 的php实现","date":"2022-04-22T07:06:34.000Z","updated":"2023-09-12T05:50:09.117Z","comments":true,"path":"api/articles/类似Mysql中Order By Field 的php实现.json","keywords":null,"cover":null,"text":" 提示 我们知道在MySQL可以通过...order by field()函数自定义排序，格式：field(字段名,str1,str2,str3,str4)，按...","permalink":"/post/类似Mysql中Order By Field 的php实现","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"PHP","slug":"PHP","count":6,"path":"api/categories/PHP.json"}],"tags":[{"name":"PHP","slug":"PHP","count":5,"path":"api/tags/PHP.json"},{"name":"Array Sort","slug":"Array-Sort","count":1,"path":"api/tags/Array-Sort.json"}],"author":{"name":"Twitf","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"<p>To Win In The Future.</p> <p>赢<b>在</b>未来。</p>","socials":{"github":"https://github.com/twitf","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}